#
#   Author: Rohith
#   Date: 2015-05-08 11:29:25 +0100 (Fri, 08 May 2015)
#
#  vim:ts=2:sw=2:et
#
---

- name: configure jenkins port
  lineinfile: dest=/etc/sysconfig/jenkins regexp=^HTTP_PORT= line=HTTP_PORT={{port}}
  register: config_changed
  when: is_centos

- name: restart jenkins now
  service: name=jenkins state=restarted
  when: config_changed.changed

- name: configure jenkins prefix
  when: prefix is defined
  lineinfile: dest=/etc/sysconfig/jenkins regexp=^PREFIX= line=PREFIX={{prefix}}

- name: onfigure jenkins r-mail
  when: email is defined
  template: src=hudson.tasks.Mailer.xml.j2 dest={{ jenkins_lib }}/hudson.tasks.Mailer.xml owner=jenkins group=jenkins mode=0644
